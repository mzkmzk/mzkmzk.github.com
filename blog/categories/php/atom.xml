<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: php | K]]></title>
  <link href="http://mzkmzk.github.io/blog/categories/php/atom.xml" rel="self"/>
  <link href="http://mzkmzk.github.io/"/>
  <updated>2015-09-09T16:41:24+08:00</updated>
  <id>http://mzkmzk.github.io/</id>
  <author>
    <name><![CDATA[K]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[php_配置记录错误文件]]></title>
    <link href="http://mzkmzk.github.io/blog/2015/09/06/php_error_log/"/>
    <updated>2015-09-06T11:37:40+08:00</updated>
    <id>http://mzkmzk.github.io/blog/2015/09/06/php_error_log</id>
    <content type="html"><![CDATA[<h3>0x00 配置php.ini</h3>

<p>php.ini中设置</p>

<pre><code>log_errors = On
error_log = /var/log/php_errors.log
</code></pre>

<p>重启服务器 Mac:<code>sudo /usr/sbin/apachectl restart</code></p>

<h3>添加错误文件</h3>

<p>这个非常重要.由于当时我添加文件写错了名字&hellip;导致耽误了很多时间..吐槽一下..php不能自己自动添加文件吗?权限问题?不应该</p>

<p>安装error_log添加文件然后给权限777就行.</p>

<h3>其他参考</h3>

<p>错误级别error_reporting设置<a href="http://www.vfeelit.com/232.html">http://www.vfeelit.com/232.html</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[php_selenium入门]]></title>
    <link href="http://mzkmzk.github.io/blog/2015/09/05/php_selenium/"/>
    <updated>2015-09-05T11:37:40+08:00</updated>
    <id>http://mzkmzk.github.io/blog/2015/09/05/php_selenium</id>
    <content type="html"><![CDATA[
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[php Warning: session_start()]]></title>
    <link href="http://mzkmzk.github.io/blog/2015/01/28/php_session/"/>
    <updated>2015-01-28T11:37:40+08:00</updated>
    <id>http://mzkmzk.github.io/blog/2015/01/28/php_session</id>
    <content type="html"><![CDATA[<!--more-->


<pre><code>php Warning: session_start(): The session id is too long or contains illegal characters, valid characters are a-z, A-Z, 0-9 and '-,'
</code></pre>

<p>突然发现在页面会显示这个错误 找到了暂时的解决办法</p>

<p>把session_start(); 改为</p>

<pre><code>function my_session_start()
{
if (ini_get('session.use_cookies') &amp;&amp; isset($_COOKIE['PHPSESSID'])) {
    $sessid = $_COOKIE['PHPSESSID'];
} elseif (!ini_get('session.use_only_cookies') &amp;&amp; isset($_GET['PHPSESSID'])) {
    $sessid = $_GET['PHPSESSID'];
} else {
    session_start();
    return false;
}

if (!preg_match('/^[a-z0-9]{32}$/', $sessid)) {
    return false;
}
session_start();

return true;
}
</code></pre>

<p>然后调用my_session_start()即可</p>

<h3>后续..</h3>

<p>发现之后等候PHPSESSION一直为空 怎么设置都没有- -&hellip;然后换Safari试试&hellip;结果SESSION完全没问题..然后返回Chrome删除下COOKIE&hellip;就OK&hellip;..</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[php 上传图片和预览]]></title>
    <link href="http://mzkmzk.github.io/blog/2015/01/07/php_upload_picture/"/>
    <updated>2015-01-07T11:37:40+08:00</updated>
    <id>http://mzkmzk.github.io/blog/2015/01/07/php_upload_picture</id>
    <content type="html"><![CDATA[<!--more-->


<p>效果图</p>

<pre><code>![image](images/blog/2015-01-07-02.png)
</code></pre>

<p>只需更改下</p>

<pre><code>$upfile='./image/human'; //图片目录路径
</code></pre>

<p>此行的图片路径和权限即可</p>

<pre><code>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;
&lt;title&gt;上传图片&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;&lt;div align="center" style="width:50%; height:300px; font-size:13px"&gt;
&lt;h3&gt;上传图片预览&lt;/h3&gt;
&lt;form name="frm" method="post" enctype="multipart/form-data"&gt;
&lt;font style="letter-spacing:1px" color="#FF0000"&gt;*只允许上传jpg|png|bmp|pjpeg|gif格式的图片&lt;/font&gt;&lt;br/&gt;&lt;br/&gt;
请选择图片：
 &lt;input name='upfile' type='file'/&gt;
 &lt;input name="btn" type="submit" value="上传" /&gt;&lt;br /&gt;
&lt;/form&gt;
&lt;?php
//全局变量
$arrType=array('image/jpg','image/gif','image/png','image/bmp','image/pjpeg');
$max_size='500000';      // 最大文件限制（单位：byte）
$upfile='./image/human'; //图片目录路径
$file=$_FILES['upfile'];    

if($_SERVER['REQUEST_METHOD']=='POST'){ //判断提交方式是否为POST
 if(!is_uploaded_file($file['tmp_name'])){ //判断上传文件是否存在
echo "&lt;font color='#FF0000'&gt;文件不存在！&lt;/font&gt;";
exit;
}
if($file['size']&gt;$max_size){  //判断文件大小是否大于500000字节
echo "&lt;font color='#FF0000'&gt;上传文件太大！&lt;/font&gt;";
exit;
} 
if(!in_array($file['type'],$arrType)){  //判断图片文件的格式
 echo "&lt;font color='#FF0000'&gt;上传文件格式不对！&lt;/font&gt;";
 exit;
 }
 if(!file_exists($upfile)){  // 判断存放文件目录是否存在
 mkdir($upfile,0777,true);
 } 
  $imageSize=getimagesize($file['tmp_name']);   $img=$imageSize[0].'*'.$imageSize[1];
  $fname=$file['name'];
  $ftype=explode('.',$fname);
  $picName=$upfile."/cloudy".$fname;
  if(file_exists($picName)){
echo "&lt;font color='#FF0000'&gt;同文件名已存在！&lt;/font&gt;";
exit;
 }
 if(!move_uploaded_file($file['tmp_name'],$picName)){  
echo "&lt;font color='#FF0000'&gt;移动文件出错！&lt;/font&gt;";
exit;
}
else{
echo "&lt;font color='#FF0000'&gt;图片文件上传成功！&lt;/font&gt;&lt;br/&gt;";
echo "&lt;font color='#0000FF'&gt;图片大小：$img&lt;/font&gt;&lt;br/&gt;";
echo "图片预览：&lt;br&gt;&lt;div style='border:#F00 1px solid; width:200px;height:200px'&gt;
&lt;img src=\"".$picName."\" width=200px height=200px&gt;".$fname."&lt;/div&gt;";
}
  }
  ?&gt;
  &lt;/div&gt;
  &lt;/body&gt;
  &lt;/html&gt;
</code></pre>

<p>参考链接<a href="http://blog.163.com/ylx282006@126/blog/static/597727172010112385533429/">http://blog.163.com/ylx282006@126/blog/static/597727172010112385533429/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[php 函数累积]]></title>
    <link href="http://mzkmzk.github.io/blog/2015/01/07/php_function/"/>
    <updated>2015-01-07T11:37:40+08:00</updated>
    <id>http://mzkmzk.github.io/blog/2015/01/07/php_function</id>
    <content type="html"><![CDATA[<h3>查看php环境信息</h3>

<pre><code>phpinfo() ;
</code></pre>

<h3>截取字符串函数</h3>

<pre><code>$str1 = substr($str,5);
echo "从第5个字符开始取至最后：".$str1."

string substr(string string, int start, int [length])
</code></pre>

<p> 参考链接<a href="http://www.php100.com/html/php/hanshu/2013/0905/4650.html">http://www.php100.com/html/php/hanshu/2013/0905/4650.html</a></p>

<h3>随机函数</h3>

<pre><code>//mt_rand生成一个介于33和126之间的数字 
//chr()将数字转为字符串
char(mt_rand(33, 126));
</code></pre>

<h3>php 获取 form表单传递过来的file文件</h3>

<pre><code>$_FILES($_REQUEST("fiel控件的name"));
</code></pre>

<h3>header()跳转页面</h3>

<h3>other</h3>

<ol>
<li><code>isset(变量)</code>,测试参数是否为NULL</li>
<li><code>require_once()</code>检查该文件是否已经被包含过，如果是则不会再次包含.</li>
<li><code>$_SERVER['PHP_SELF']</code>获取本文件的网络路径</li>
<li><code>dirname(__FILE__)</code>获取本文件的系统路径</li>
<li>在通用文件中,设置变量等于文件路径会随着调用文件的路径改变而改变,要通过define设置网站根路径.</li>
<li><code>empty()</code>判断字符串是否为空 是则返回1</li>
<li><code>count(数组)</code>;返回数组长度</li>
<li><code>intval()</code>向下取整;</li>
<li><code>ceil</code>向上取整</li>
<li><code>array_unshift(array,var)</code>在数组头结点添加一个或多个元素</li>
<li><code>strlen($var)</code>返回字符串长度</li>
<li>&lsquo;&#8217;和&#8221;&ldquo; 前者不会解析$ 后者会;</li>
<li><code>var_dump(对象)</code>会输出类的详情</li>
</ol>


<h3>note</h3>

<ol>
<li>在表格中echo东西,如果没有td 会默认在表格前.</li>
</ol>


<h3>框架引用</h3>

<p>laravel<a href="https://phphub.org/">https://phphub.org/</a>,官网<a href="http://laravel-china.org/">http://laravel-china.org/</a></p>

<h3>php修改时区问题</h3>

<ol>
<li><p>在php.ini设置date.tiemzome 参考资料<a href="http://www.ezloo.com/2009/08/php_timezone.html">http://www.ezloo.com/2009/08/php_timezone.html</a></p></li>
<li><p>重启服务器<code>sudo service apache2 restart</code></p></li>
</ol>


<h3>Mac重启服务器</h3>

<pre><code>sudo /usr/sbin/apachectl  restart
</code></pre>

<h3>Mac设置php.ini</h3>

<p>Mac的php要在/etc下新建一个php.ini才起作用.当然他有个php.ini.default给您cp</p>

<p>参考链接<a href="http://blog.saymoon.com/2011/03/mac-os-phpini/">http://blog.saymoon.com/2011/03/mac-os-phpini/</a></p>

<h3>php.ini各系统存在位置</h3>

<ol>
<li><p>Linux</p>

<p>  1.1 /etc/php.ini</p>

<p>  1,2 /usr/bin/php5/bin/php.ini</p>

<p>  1.3 /etc/php/php.ini</p>

<p>  1.4 /etc/php5/apache2/php.ini</p></li>
<li><p>Mac OSX   /private/etc/php.ini</p></li>
<li>Windows (with XAMPP installed)    C:/xampp/php/php.ini</li>
</ol>


<p>当然phpinfo();也可以查看php.ini的存在路径</p>

<h3>Cannot modify header information – headers already sent by cookie 的解决办法</h3>

<p>php.ini中设置</p>

<pre><code> output_buffering
     Default Value: On
     Development Value: 4096
     Production Value: 4096
</code></pre>

<h2>php显示错误设置</h2>

<pre><code>//php.ini中
display_errors = On
</code></pre>

<p>参考链接<a href="http://www.jb51.net/article/50025.htm">http://www.jb51.net/article/50025.htm</a></p>

<h3>待消化</h3>

<ol>
<li>apache日志文件设置<a href="http://yansu.org/2014/01/24/apache-log-format.html">http://yansu.org/2014/01/24/apache-log-format.html</a></li>
</ol>


<h3>php自动化测试</h3>

<p>IBM<a href="http://www.ibm.com/developerworks/cn/opensource/os-cn-php-autotest/">http://www.ibm.com/developerworks/cn/opensource/os-cn-php-autotest/</a></p>

<h3>php json数据返回多了一个空行</h3>

<p>很大的一种概率是php中有空的字符返回了.懒得找的方式就是这样得到json后去掉一下前后空行</p>

<pre><code>String.prototype.trim = function() {
var str = this,
str = str.replace(/^\s\s*/, ''),
ws = /\s/,
i = str.length;
while (ws.test(str.charAt(--i)));
return str.slice(0, i + 1);
}
</code></pre>

<p>参考链接<a href="http://www.cnblogs.com/rubylouvre/archive/2009/09/18/1568794.html">http://www.cnblogs.com/rubylouvre/archive/2009/09/18/1568794.html</a></p>

<h3>Fatal error: Cannot redeclare class</h3>

<p>重复定义类/类路径错误</p>
]]></content>
  </entry>
  
</feed>
