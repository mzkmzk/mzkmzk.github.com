
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Linux拓展硬盘 - K</title>
	<meta name="author" content="K">

	
	<meta name="description" content="0x00原因 犹豫昨天import了一个1.7G的数据库 导致硬盘不够用 开机时输入完密码后无法进入图形界面 显示错误 Ubuntu-The configuration defaults for GNOME Power Manager have not been installed &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="baidu-site-verification" content="HWyzFajtAX" />
	<meta name="google-site-verification" content="xf8laC_mNTP9RdWTD-O8D4yYFsMXXnGjvcWVNqfNntk" />
	<link href="false" rel="alternate" title="K" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
	<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?1e6c60ae572d5e740a34233f4accedbd";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>


<body>
	<header id="header" class="inner"><h1><a href="/">K</a></h1>
<nav id="K_select">
	<div class="alignleft menu">
		<a class="button">Category</a>
		<div class="container"><ul class="main">
		
	
<li><a href="/blog/categories/markdown">markdown</a></li>

<li><a href="/blog/categories/data">data</a></li>

<li><a href="/blog/categories/php">php</a></li>

<li><a href="/blog/categories/svn">svn</a></li>

<li><a href="/blog/categories/octopress">octopress</a></li>

<li><a href="/blog/categories/sql">sql</a></li>

<li><a href="/blog/categories/j2ee">j2ee</a></li>

<li><a href="/blog/categories/mac">mac</a></li>

<li><a href="/blog/categories/struts2">struts2</a></li>

<li><a href="/blog/categories/android">android</a></li>

<li><a href="/blog/categories/hack">hack</a></li>

<li><a href="/blog/categories/design">design</a></li>

<li><a href="/blog/categories/eclipse">eclipse</a></li>

<li><a href="/blog/categories/readme">readme</a></li>

<li><a href="/blog/categories/arduino">arduino</a></li>

<li><a href="/blog/categories/jquery">jquery</a></li>

<li><a href="/blog/categories/javascript">javascript</a></li>

<li><a href="/blog/categories/bootstrap">bootstrap</a></li>

<li><a href="/blog/categories/squild">squild</a></li>

<li><a href="/blog/categories/iphone">iphone</a></li>

<li><a href="/blog/categories/question">question</a></li>

<li><a href="/blog/categories/java">java</a></li>

<li><a href="/blog/categories/photoshop">photoshop</a></li>

<li><a href="/blog/categories/sqlmap">sqlmap</a></li>

<li><a href="/blog/categories/python">python</a></li>

<li><a href="/blog/categories/git">git</a></li>

<li><a href="/blog/categories/pr">pr</a></li>

<li><a href="/blog/categories/linux">linux</a></li>

<li><a href="/blog/categories/oracle">oracle</a></li>

<li><a href="/blog/categories/windows">windows</a></li>

<li><a href="/blog/categories/video">video</a></li>

<li><a href="/blog/categories/travel">travel</a></li>

<li><a href="/blog/categories/web">web</a></li>

<li><a href="/blog/categories/httracl">httracl</a></li>

<li><a href="/blog/categories/httpclient">httpclient</a></li>

<li><a href="/blog/categories/tjrac">tjrac</a></li>

<li><a href="/blog/categories/about_me">about_me</a></li>

<li><a href="/blog/categories/seo">seo</a></li>

<li><a href="/blog/categories/前端">前端</a></li>

<li><a href="/blog/categories/ios">ios</a></li>

<li><a href="/blog/categories/axure">axure</a></li>

<li><a href="/blog/categories/html">html</a></li>

<li><a href="/blog/categories/node">node</a></li>

<li><a href="/blog/categories/my">my</a></li>

<li><a href="/blog/categories/develop">develop</a></li>

<li><a href="/blog/categories/">About me</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:mzkmzk.github.io">
			</form>
		</div>
	</div>
</nav>
<nav id="main-nav">
	<ul class="main">
		<li><a href="/blog/2015/07/16/adoube_me.markdwon/">About me</a></li>
	


</ul>

	</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Category</a>
		<div class="container"><ul class="main">
		
	
<li><a href="/blog/categories/markdown">markdown</a></li>

<li><a href="/blog/categories/data">data</a></li>

<li><a href="/blog/categories/php">php</a></li>

<li><a href="/blog/categories/svn">svn</a></li>

<li><a href="/blog/categories/octopress">octopress</a></li>

<li><a href="/blog/categories/sql">sql</a></li>

<li><a href="/blog/categories/j2ee">j2ee</a></li>

<li><a href="/blog/categories/mac">mac</a></li>

<li><a href="/blog/categories/struts2">struts2</a></li>

<li><a href="/blog/categories/android">android</a></li>

<li><a href="/blog/categories/hack">hack</a></li>

<li><a href="/blog/categories/design">design</a></li>

<li><a href="/blog/categories/eclipse">eclipse</a></li>

<li><a href="/blog/categories/readme">readme</a></li>

<li><a href="/blog/categories/arduino">arduino</a></li>

<li><a href="/blog/categories/jquery">jquery</a></li>

<li><a href="/blog/categories/javascript">javascript</a></li>

<li><a href="/blog/categories/bootstrap">bootstrap</a></li>

<li><a href="/blog/categories/squild">squild</a></li>

<li><a href="/blog/categories/iphone">iphone</a></li>

<li><a href="/blog/categories/question">question</a></li>

<li><a href="/blog/categories/java">java</a></li>

<li><a href="/blog/categories/photoshop">photoshop</a></li>

<li><a href="/blog/categories/sqlmap">sqlmap</a></li>

<li><a href="/blog/categories/python">python</a></li>

<li><a href="/blog/categories/git">git</a></li>

<li><a href="/blog/categories/pr">pr</a></li>

<li><a href="/blog/categories/linux">linux</a></li>

<li><a href="/blog/categories/oracle">oracle</a></li>

<li><a href="/blog/categories/windows">windows</a></li>

<li><a href="/blog/categories/video">video</a></li>

<li><a href="/blog/categories/travel">travel</a></li>

<li><a href="/blog/categories/web">web</a></li>

<li><a href="/blog/categories/httracl">httracl</a></li>

<li><a href="/blog/categories/httpclient">httpclient</a></li>

<li><a href="/blog/categories/tjrac">tjrac</a></li>

<li><a href="/blog/categories/about_me">about_me</a></li>

<li><a href="/blog/categories/seo">seo</a></li>

<li><a href="/blog/categories/前端">前端</a></li>

<li><a href="/blog/categories/ios">ios</a></li>

<li><a href="/blog/categories/axure">axure</a></li>

<li><a href="/blog/categories/html">html</a></li>

<li><a href="/blog/categories/node">node</a></li>

<li><a href="/blog/categories/my">my</a></li>

<li><a href="/blog/categories/develop">develop</a></li>

<li><a href="/blog/categories/">About me</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:mzkmzk.github.io">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		
    
		
		
		
		
		
    
	</div>
	
</nav>

</header>
	
		
	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">Linux拓展硬盘</h2>
	<div class="entry-content"><!--more-->


<h3>0x00原因</h3>

<p>犹豫昨天import了一个1.7G的数据库 导致硬盘不够用 开机时输入完密码后无法进入图形界面</p>

<p>显示错误</p>

<pre><code>Ubuntu-The configuration defaults for GNOME Power Manager have not been installed correctly
</code></pre>

<h3>0x01Vmware 给虚拟机加硬盘</h3>

<p>这个在设备比较好加</p>

<p>加完后 启动机器</p>

<pre><code>[root@linux5 oracle]#su root
[root@linux5 oracle]# fdisk -l

Disk /dev/sda: 53.7 GB, 53687091200 bytes
255 heads, 63 sectors/track, 6527 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00038d6a
Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *           1          39      307200   83  Linux
Partition 1 does not end on cylinder boundary.
/dev/sda2              39        2093    16501760   83  Linux
/dev/sda3            2093        2611     4161536   82  Linux swap / Solaris
</code></pre>

<h3>0x02 新建分区</h3>

<pre><code>[root@linux5 oracle]# fdisk -cu /dev/sda

Command (m for help): n
Command action
e   extended
p   primary partition (1-4)
p
Selected partition 4
First sector (41943040-104857599, default 41943040): 
Using default value 41943040
Last sector, +sectors or +size{K,M,G} (41943040-104857599, default 104857599): 
Using default value 104857599

Command (m for help): w
The partition table has been altered!

Calling ioctl() to re-read partition table.

WARNING: Re-reading the partition table failed with error 16: 设备或资源忙.
The kernel still uses the old table. The new table will be used at
the next reboot or after you run partprobe(8) or kpartx(8)
Syncing disks.
</code></pre>

<p>这里报了个警告 说资源在忙</p>

<p>查看新建结果</p>

<pre><code>[root@linux5 oracle]# fdisk -l

Disk /dev/sda: 53.7 GB, 53687091200 bytes
255 heads, 63 sectors/track, 6527 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00038d6a

Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *           1          39      307200   83  Linux
Partition 1 does not end on cylinder boundary.
/dev/sda2              39        2093    16501760   83  Linux
/dev/sda3            2093        2611     4161536   82  Linux swap / Solaris
/dev/sda4            2611        6528    31457280   83  Linux
Partition 4 does not end on cylinder boundary.
</code></pre>

<p>这里最后报了个 分区4没有结束范围&hellip;刚的新建分区应该是有问题</p>

<h3>0x03 格式化新建分区</h3>

<p>查了一下以前的文件类型</p>

<pre><code>[root@linux5 oracle]# more /etc/fstab 

#
# /etc/fstab
# Created by anaconda on Mon Mar 30 09:13:27 2015
#
# Accessible filesystems, by reference, are maintained under '/dev/disk'
# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info
#
UUID=18d82504-c890-43d2-9b7c-771f22e8f762 /                       ext4    defaults 
   1 1
UUID=8b4ddae2-a584-4a7f-a9aa-9633b32b4816 /boot                   ext4    defaults 
   1 2
UUID=2de40b84-00b1-4507-9d59-a4041ec0a903 swap                    swap    defaults 
   0 0
tmpfs                   /dev/shm                tmpfs   defaults        0 0
devpts                  /dev/pts                devpts  gid=5,mode=620  0 0
sysfs                   /sys                    sysfs   defaults        0 0
proc                    /proc                   proc    defaults        0 0
</code></pre>

<p>恩 以前的是ext4的 开始格式化新建磁盘分区</p>

<pre><code>[root@linux5 oracle]# mkfs -t ext4 /dev/sda4 
mke2fs 1.41.12 (17-May-2010)
文件系统标签=
操作系统:Linux
块大小=4096 (log=2)
分块大小=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
1966080 inodes, 7864320 blocks
393216 blocks (5.00%) reserved for the super user
第一个数据块=0
Maximum filesystem blocks=0
240 block groups
32768 blocks per group, 32768 fragments per group
8192 inodes per group
Superblock backups stored on blocks: 
32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 
4096000

正在写入inode表: 完成                            
Creating journal (32768 blocks): 完成
Writing superblocks and filesystem accounting information: 完成
</code></pre>

<p>好了格式化完毕</p>

<h3>挂载硬盘</h3>

<p>查询UUID</p>

<pre><code>[root@linux5 oracle]# blkid /dev/sda4
/dev/sda4: UUID="b6705f46-548a-4eeb-bc85-92e3550599f3" TYPE="ext4" 
</code></pre>

<p>然后就编辑<code>/etc/fstab</code>在里面加入</p>

<pre><code>UUID=b6705f46-548a-4eeb-bc85-92e3550599f3 /oracle                       ext4    defaults        1 2
</code></pre>

<p>第五列：指明是否要备份，（0为不备份，1为要备份，一般根分区要备份）</p>

<p>第六列：指明自检顺序。 （0为不自检，1或者2为要自检，如果是根分区要设为1，其他分区只能是2）</p>

<p><code>/etc/fstab</code>参数说明<a href="http://hndtraveller.blog.51cto.com/231121/186777">http://hndtraveller.blog.51cto.com/231121/186777</a></p>

<p>ok 我现在主要问题是Oracle太大 但是直接把/oracle挂载在 /dev/sdb4上</p>

<pre><code>#实时把/dev/sda4 挂载 /oracle里
mount /dev/sda4 /oracle
#/帮oracle先改名
mv /oracle /oracle.bk
#创建空的/oracle
mkdir /oracle
#更改为原来权限
chown oracle:oinstall /oracle
#移动数据
mv /oracle.bk/* /oracle
#去除备份数据库目录
rmdir /oracle.bk
</code></pre>

<p>再df -h</p>

<pre><code>[root@linux5 oracle]# df -h
文件系统          容量  已用  可用 已用%% 挂载点
/dev/sda2              16G   15G     0 100% /
tmpfs                 1.9G     0  1.9G   0% /dev/shm
/dev/sda1             291M   34M  243M  12% /boot
.host:/               373G  283G   91G  76% /mnt/hgfs   /dev/sda4              30G  172M   28G   1% /oracle
</code></pre>

<p>ok 勉强成功</p>

<h3>参考资料</h3>

<p>其实这个方法要更简便 差不多 用tar来代码我的mv</p>

<p><a href="http://blog.csdn.net/cymm_liu/article/details/11932297">http://blog.csdn.net/cymm_liu/article/details/11932297</a></p>
</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-04-05T11:37:40+08:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/linux/'>linux</a>


</div>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
		
		
		<a class="addthis_button_tweet"></a>
		
		
		
	</div>
	
</div>






  <section>
    <h1>Comments</h1>
    <div id="comments" aria-live="polite">

<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="Linux拓展硬盘" data-title="Linux拓展硬盘" data-url="/blog/2015/04/05/enpand_disk/"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"mzkmzk"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end --></div>
  </section>
</div>
	<footer id="footer" class="inner">

Copyright &copy; 2015

    K


</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>